name: actions-fail

on:
  push:
    branches:
      - master

jobs:
  fail-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Fetch base branch
        run: git fetch origin master

      - name: Check exitting by code 1 fails entire job
        run: |
          git diff --name-only origin/master -- index.js | grep . || {
            echo '::notice ::notice'
            echo '::warning ::exit 1, no continue-on-error set'
            echo '::error ::no diff index.js'
            exit 1
          }
        continue-on-error: true

      - name: Next Step 
        run: echo 'next step'
